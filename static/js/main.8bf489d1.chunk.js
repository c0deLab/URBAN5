(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},16:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var i=a(0),r=a.n(i),n=a(10),s=a.n(n),c=(a(16),a(2)),o=a(3),l=a(5),h=a(4),d=a(6),u=a(7),m=a.n(u),T={CUBE:0,ROOFLEFT:1,ROOFRGHT:2,TREE:3,FOLIAGE:4,PERSON:5},f={NORTH:0,EAST:1,SOUTH:2,WEST:3,TOP:4,BOTTOM:5};function w(e,t,a){return t>=0&&e.length>0&&e[0].length&&t<e[0].length&&a>=0&&a<e.length?e[a][t]:null}function v(e,t,a){return{topLeft:w(e,t-1,a+1),top:w(e,t,a+1),topRight:w(e,t+1,a+1),left:w(e,t-1,a),center:w(e,t,a),right:w(e,t+1,a),bottomLeft:w(e,t-1,a-1),bottom:w(e,t,a-1),bottomRight:w(e,t+1,a-1)}}function E(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new Array(e),r=0;r<e;r+=1){i[r]=new Array(t);for(var n=0;n<t;n+=1)i[r][n]=a}return i}var p=function e(t,a){var i=this;Object(c.a)(this,e),this.setTopoHeight=function(e,t){i.heights[e.y][e.x]=t},this.getTopoSlice=function(e,t){var a,r,n;switch(e){case f.NORTH:a=i.heights;break;case f.SOUTH:a=m.a.hflip(i.heights);break;case f.EAST:a=m.a.hflip(m.a.transpose(i.heights));break;case f.WEST:a=m.a.transpose(i.heights);break;case f.BOTTOM:case f.TOP:return null;default:throw new Error("camera ".concat(e," is not recogniyed!"))}for(var s=[],c=0;c<a[t].length;c+=1){var o=v(a,c,t),l=o.topLeft,h=o.top,d=o.topRight,u=o.left,T=o.center,w=o.right,E=o.bottomLeft,p=o.bottom,g=o.bottomRight;r=Math.max(l,h,u,T,E,p),n=Math.max(h,d,T,w,p,g),s.push({startHeight:r,endHeight:n})}return s},this.xMax=t,this.yMax=a,this.heights=E(this.yMax,this.xMax,0)},g=function e(){var t=this;Object(c.a)(this,e),this.addObject=function(e,a){switch(a){case T.TREE:if(e.y<t.yMax-1){var i=e.x,r=e.y,n=e.z,s={x:i,y:r,z:n+=1};if(null===t._getCell(e)&&null===t._getCell(s))return t._setCell(e,T.TREE),t._setCell(s,T.FOLIAGE),!0}return!1;default:if(null===t._getCell(e))return t._setCell(e,a),!0}return!1},this.removeObject=function(e){switch(t._getCell(e)){case T.TREE:if(e.z<t.zMax-1){t._setCell(e,null);var a=e.x,i=e.y,r=e.z;r+=1,t._setCell({x:a,y:i,z:r},null)}break;case T.FOLIAGE:if(e.z>0){t._setCell(e,null);var n=e.x,s=e.y,c=e.z;c-=1,t._setCell({x:n,y:s,z:c},null)}break;default:t._setCell(e,null)}},this.getTopoSlice=function(e,a){return t.topo.getTopoSlice(e,a)},this.getSlice=function(e,a){var i,r,n;switch(e){case f.NORTH:return t._getYSlice(a);case f.SOUTH:return i=t._getYSlice(a),m.a.hflip(i);case f.EAST:return r=t._getXSlice(a),m.a.hflip(r);case f.WEST:return t._getXSlice(a);case f.BOTTOM:return n=t._getZSlice(a),m.a.vflip(n);case f.TOP:return t._getZSlice(a);default:throw new Error("camera ".concat(e," is not recognized!"))}},this.getBackgroundSlices=function(e,a){var i=a,r=[];switch(e){case f.NORTH:for(;i<t.yMax-1;)i+=1,r.push(i);break;case f.SOUTH:for(;i>0;)i-=1,r.push(i);break;case f.EAST:for(;i<t.xMax-1;)i+=1,r.push(i);break;case f.WEST:for(;i>0;)i-=1,r.push(i);break;case f.BOTTOM:for(;i<t.zMax-1;)i+=1,r.push(i);break;case f.TOP:for(;i>0;)i-=1,r.push(i);break;default:throw new Error("camera ".concat(e," is not recognized!"))}return r.map(function(a){return t.getSlice(e,a)})},this._getZSlice=function(e){return t.objects[e]},this._getXSlice=function(e){for(var a=E(t.zMax,t.yMax),i=0;i<t.zMax;i+=1)for(var r=0;r<t.yMax;r+=1)a[i][r]=t.objects[i][r][e];return a},this._getYSlice=function(e){for(var a=E(t.zMax,t.xMax),i=0;i<t.zMax;i+=1)for(var r=0;r<t.xMax;r+=1)a[i][r]=t.objects[i][e][r];return a},this._getCell=function(e){var a=e.x,i=e.y,r=e.z;return a>=0&&i>=0&&r>=0&&a<t.xMax&&i<t.yMax&&r<t.zMax?t.objects[r][i][a]:null},this._setCell=function(e,a){var i=e.x,r=e.y,n=e.z;i>=0&&r>=0&&n>=0&&i<t.xMax&&r<t.yMax&&n<t.zMax&&(t.objects[n][r][i]=a)},this._initObjects=function(){for(var e=new Array(t.zMax),a=0;a<e.length;a+=1)e[a]=E(t.yMax,t.xMax,null);return e},this._populate=function(){t.addObject({x:2,y:10,z:2},0),t.addObject({x:2,y:10,z:3},0),t.addObject({x:3,y:10,z:3},0),t.addObject({x:4,y:10,z:3},0),t.addObject({x:13,y:10,z:0},0),t.addObject({x:12,y:10,z:0},0),t.addObject({x:12,y:10,z:1},0),t.addObject({x:11,y:10,z:1},0),t.addObject({x:10,y:10,z:1},0),t.addObject({x:11,y:10,z:2},2),t.addObject({x:14,y:10,z:0},3),t.addObject({x:15,y:10,z:0},3),t.addObject({x:8,y:10,z:0},3),t.addObject({x:4,y:11,z:1},0),t.addObject({x:4,y:11,z:2},0),t.addObject({x:3,y:11,z:2},0),t.addObject({x:5,y:11,z:2},0),t.addObject({x:6,y:11,z:2},0),t.addObject({x:6,y:11,z:3},0),t.addObject({x:7,y:11,z:3},0),t.addObject({x:8,y:11,z:0},0),t.addObject({x:9,y:11,z:0},0),t.addObject({x:9,y:11,z:1},0),t.addObject({x:11,y:11,z:0},0),t.addObject({x:9,y:12,z:2},0),t.addObject({x:9,y:12,z:3},1);for(var e=0;e<17;e+=1)t.topo.setTopoHeight({x:0,y:e},2),t.topo.setTopoHeight({x:1,y:e},2),t.topo.setTopoHeight({x:2,y:e},2),t.topo.setTopoHeight({x:3,y:e},1),t.topo.setTopoHeight({x:4,y:e},1),t.topo.setTopoHeight({x:5,y:e},1),t.topo.setTopoHeight({x:0,y:e},2),t.topo.setTopoHeight({x:1,y:e},2),t.topo.setTopoHeight({x:2,y:e},2),t.topo.setTopoHeight({x:3,y:e},1),t.topo.setTopoHeight({x:4,y:e},1),t.topo.setTopoHeight({x:5,y:e},1)},this.xMax=17,this.yMax=17,this.zMax=7,this.objects=this._initObjects(),this.topo=new p(this.xMax,this.yMax),this._populate()},O={STEPOUT:0,STEPIN:1,ADDCUBE:2,REMOVE:3,ROTATELT:4,ROTATERT:5,ADDTREE:6,ADDRFLFT:7,ADDRFRGT:8},b=a(8),y=function e(t,a){var i=this;Object(c.a)(this,e),this.draw=function(e,t){i.stage.removeAllChildren();var a=i.model.getTopoSlice(e,t);(a&&i._drawTopoSlice(a),i.drawBackground)&&i.model.getBackgroundSlices(e,t).forEach(function(t){return i._drawSlice(e,t,!0)});var r=i.model.getSlice(e,t);i._drawSlice(e,r),i._drawGridPoints(r),i.stage.update()},this.clear=function(){i.stage.removeAllChildren(),i.stage.update()},this._drawTopoSlice=function(e){var t,a=new b.createjs.Shape,r=1;a.graphics.beginStroke(i.color).setStrokeStyle(3),e.forEach(function(e){var n=e.startHeight,s=e.endHeight;t=i.height-1-n*i.r,a.graphics.moveTo(r,t),r+=i.r,t=i.height-1-s*i.r,a.graphics.lineTo(r,t)}),a.graphics.endStroke(),i.stage.addChild(a)},this._drawSlice=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.camera=e;for(var r=0;r<t.length;r+=1)for(var n=t[r],s=0;s<n.length;s+=1){var c=n[s],o=v(t,s,r);switch(c){case T.CUBE:i._drawCube(s,r,a,o);break;case T.TREE:i._drawTrunk(s,r,a);break;case T.FOLIAGE:i._drawFoliage(s,r,a);break;case T.ROOFLEFT:i._drawRoofLeft(s,r,a,o);break;case T.ROOFRGHT:i._drawRoofRight(s,r,a,o)}}},this._drawGridPoints=function(e){for(var t=0;t<e.length;t+=1)for(var a=e[t],r=0;r<a.length;r+=1){var n=new b.createjs.Shape,s=(r+.5)*i.r,c=i.height-(t+.5)*i.r;n.graphics.beginStroke(i.color).setStrokeStyle(2).drawRect(s,c,2,-2),i.stage.addChild(n)}},this._drawCube=function(e,t){var a,r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,c=s.top,o=s.left,l=s.right,h=s.bottom,d=![T.CUBE,T.ROOFLEFT,T.ROOFRGHT].includes(c),u=![T.CUBE,T.ROOFLEFT,T.ROOFRGHT].includes(h);switch(i.camera){case f.NORTH:case f.SOUTH:a=![T.CUBE,T.ROOFLEFT].includes(o),r=![T.CUBE,T.ROOFRGHT].includes(l);break;default:a=![T.CUBE].includes(o),r=![T.CUBE].includes(l)}i._drawSquare(e,t,n,a,d,r,u)},this._drawTrunk=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new b.createjs.Shape;a&&r.graphics.setStrokeDash([3,7],0),r.graphics.beginStroke(i.color).setStrokeStyle(3);var n=(e+.5)*i.r+1,s=i.height-t*i.r-1;switch(i.camera){case f.NORTH:case f.SOUTH:case f.WEST:case f.EAST:r.graphics.drawRect(n,s,2,-i.r);break;case f.TOP:case f.BOTTOM:n-=2,s-=.5*i.r+2,r.graphics.drawRect(n,s,6,6);break;default:throw new Error("camera ".concat(i.camera," is not recognized!"))}i.stage.addChild(r)},this._drawFoliage=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new b.createjs.Shape;a&&r.graphics.setStrokeDash([3,7],0),r.graphics.beginStroke(i.color).setStrokeStyle(3);var n=(e+.5)*i.r+1,s=i.height-(t+.45)*i.r-1;r.graphics.drawCircle(n,s,.4*i.r),i.stage.addChild(r)},this._drawRoofLeft=function(e,t,a,r){var n,s=r.left,c=r.right;switch(i.camera){case f.NORTH:n=![T.CUBE,T.ROOFRGHT].includes(c),i._drawLineSlantLeft(e,t,a,n);break;case f.SOUTH:n=![T.CUBE,T.ROOFRGHT].includes(s),i._drawLineSlantRight(e,t,a,n);break;case f.WEST:case f.EAST:case f.TOP:case f.BOTTOM:i._drawSquare(e,t,a);break;default:throw new Error("camera ".concat(i.camera," is not recognized!"))}},this._drawRoofRight=function(e,t,a,r){var n,s=r.left,c=r.right;switch(i.camera){case f.NORTH:n=![T.CUBE,T.ROOFLEFT].includes(s),i._drawLineSlantRight(e,t,a,n);break;case f.SOUTH:n=![T.CUBE,T.ROOFLEFT].includes(c),i._drawLineSlantLeft(e,t,a,n);break;case f.WEST:case f.EAST:case f.TOP:case f.BOTTOM:i._drawSquare(e,t,a);break;default:throw new Error("camera ".concat(i.camera," is not recognized!"))}},this._drawSquare=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],c=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=new b.createjs.Shape;o.graphics.beginStroke(i.color).setStrokeStyle(3);var l=e*i.r+1,h=i.r,d=i.height-t*i.r-1,u=-i.r;a&&o.graphics.setStrokeDash([3,7],0),r&&o.graphics.moveTo(l,d).lineTo(l,d+u),n&&o.graphics.moveTo(l,d+u).lineTo(l+h,d+u),s&&o.graphics.moveTo(l+h,d+u).lineTo(l+h,d),c&&o.graphics.moveTo(l+h,d).lineTo(l,d),i.stage.addChild(o)},this._drawLineSlantLeft=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new b.createjs.Shape;a&&n.graphics.setStrokeDash([3,8.5],0);var s=e*i.r+1,c=i.height-t*i.r-1;n.graphics.beginStroke(i.color).setStrokeStyle(3),n.graphics.moveTo(s,c),s+=i.r,c-=i.r,n.graphics.lineTo(s,c),r&&(n.graphics.moveTo(s,c),c+=i.r,n.graphics.lineTo(s,c)),n.graphics.endStroke(),i.stage.addChild(n)},this._drawLineSlantRight=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=new b.createjs.Shape;a&&n.graphics.setStrokeDash([3,8.5],0);var s=e*i.r+1,c=i.height-(t+1)*i.r-1;n.graphics.beginStroke(i.color).setStrokeStyle(3),n.graphics.moveTo(s,c),s+=i.r,c+=i.r,n.graphics.lineTo(s,c),r&&(s-=i.r,c-=i.r,n.graphics.moveTo(s,c),c+=i.r,n.graphics.lineTo(s,c)),n.graphics.endStroke(),i.stage.addChild(n)},this.model=a,this.stage=new b.createjs.Stage(t),this.gridSize=17,this.height=t.height,this.r=(this.height-2)/this.gridSize,this.color="#ffffff",this.drawBackground=!0},x=function e(t){var a=this;Object(c.a)(this,e),this.addListener=function(e){return a.views.push(e)},this.removeListener=function(e){return a.views.filter(function(t){return t!==e})},this.addObject=function(e,t,i){var r=a.getRelativePosition(e,t);r&&(a.model.addObject(r,i),a.updateViews())},this.removeObject=function(e,t){var i=a.getRelativePosition(e,t);i&&(a.model.removeObject(i),a.updateViews())},this.nextSlice=function(){switch(a.camera){case f.NORTH:a._setSliceYAxis(a.sliceYAxis+1);break;case f.SOUTH:a._setSliceYAxis(a.sliceYAxis-1);break;case f.EAST:a._setSliceXAxis(a.sliceXAxis+1);break;case f.WEST:a._setSliceXAxis(a.sliceXAxis-1);break;case f.TOP:a._setSliceZAxis(a.sliceZAxis-1);break;case f.BOTTOM:a._setSliceZAxis(a.sliceZAxis+1);break;default:throw new Error("camera ".concat(a.camera," is not recognized!"))}},this.previousSlice=function(){switch(a.camera){case f.NORTH:a._setSliceYAxis(a.sliceYAxis-1);break;case f.SOUTH:a._setSliceYAxis(a.sliceYAxis+1);break;case f.EAST:a._setSliceXAxis(a.sliceXAxis-1);break;case f.WEST:a._setSliceXAxis(a.sliceXAxis+1);break;case f.TOP:a._setSliceZAxis(a.sliceZAxis+1);break;case f.BOTTOM:a._setSliceZAxis(a.sliceZAxis-1);break;default:throw new Error("camera ".concat(a.camera," is not recognized!"))}},this.north=function(){return a._setCamera("NORTH")},this.south=function(){return a._setCamera("SOUTH")},this.east=function(){return a._setCamera("EAST")},this.west=function(){return a._setCamera("WEST")},this.top=function(){return a._setCamera("TOP")},this.bottom=function(){return a._setCamera("BOTTOM")},this.rotateLeft=function(){switch(a.camera){case f.NORTH:a._setCamera("EAST");break;case f.EAST:a._setCamera("SOUTH");break;case f.SOUTH:a._setCamera("WEST");break;case f.WEST:a._setCamera("NORTH")}},this.rotateRight=function(){switch(a.camera){case f.NORTH:a._setCamera("WEST");break;case f.WEST:a._setCamera("SOUTH");break;case f.SOUTH:a._setCamera("EAST");break;case f.EAST:a._setCamera("NORTH")}},this._setSliceZAxis=function(e){e>=0&&e<a.zMax&&(a.sliceZAxis=e,a.updateViews())},this._setSliceXAxis=function(e){e>=0&&e<a.xMax&&(a.sliceXAxis=e,a.updateViews())},this._setSliceYAxis=function(e){e>=0&&e<a.yMax&&(a.sliceYAxis=e,a.updateViews())},this._setCamera=function(e){a.camera=f[e],a.updateViews()},this.updateViews=function(){var e;switch(a.camera){case f.NORTH:case f.SOUTH:e=a.sliceYAxis;break;case f.EAST:case f.WEST:e=a.sliceXAxis;break;case f.TOP:case f.BOTTOM:e=a.sliceZAxis;break;default:throw new Error("camera ".concat(a.camera," is not recognized!"))}a.views.forEach(function(t){return t.draw(a.camera,e)})},this.getRelativePosition=function(e,t){var i=Math.floor(e*a.gridSize),r=a.gridSize-1-Math.floor(t*a.gridSize);switch(a.camera){case f.NORTH:case f.SOUTH:case f.EAST:case f.WEST:if(r>=a.zMax)return null}switch(a.camera){case f.NORTH:return{x:i,y:a.sliceYAxis,z:r};case f.SOUTH:return{x:a.gridSize-1-i,y:a.sliceZAxis,z:r};case f.EAST:return{x:a.sliceXAxis,y:a.gridSize-1-i,z:r};case f.WEST:return{x:a.sliceXAxis,y:i,z:r};case f.BOTTOM:return{x:i,y:a.gridSize-1-r,z:a.sliceZAxis};case f.TOP:return{x:i,y:r,z:a.sliceZAxis};default:throw new Error("camera ".concat(a.camera," is not recognized!"))}},this.gridSize=17,this.xMax=17,this.yMax=17,this.zMax=7,this.model=t,this.sliceXAxis=0,this.sliceYAxis=0,this.sliceZAxis=6,this.views=[],this.north()},S=(a(18),function e(t,a,i,r,n){var s=this;Object(c.a)(this,e),this.draw=function(){var e;switch(s.camera){case f.SOUTH:case f.NORTH:e=s.controller.sliceYAxis;break;case f.WEST:case f.EAST:e=s.controller.sliceXAxis;break;case f.BOTTOM:case f.TOP:e=s.controller.sliceZAxis;break;default:throw new Error("camera ".concat(s.camera," is not recognized!"))}e===s.sliceIndex?s.view.color="#ff0000":s.view.color="#ffffff",s.view.draw(s.camera,s.sliceIndex)},this.view=new y(t,a),this.camera=r,this.sliceIndex=n,this.controller=i,this.view.drawBackground=!1}),k=function e(t,a,i,r,n){var s=this;Object(c.a)(this,e),this.draw=function(){return s.view.draw(s.camera,s.controller[s.axisLabel])},this.view=new y(t,a),this.controller=i,this.camera=r,this.axisLabel=n,this.view.drawBackground=!1},A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).wire=function(){if(!a.isWired){var e=a.props,t=e.controller,i=e.model;if(t&&i){for(var r=0;r<17;r+=1)t.addListener(new S(document.getElementById("testCanvasArrNS".concat(r)),i,t,f.NORTH,r));for(var n=0;n<17;n+=1)t.addListener(new S(document.getElementById("testCanvasArrEW".concat(n)),i,t,f.EAST,n));for(var s=0;s<7;s+=1)t.addListener(new S(document.getElementById("testCanvasArrTB".concat(s)),i,t,f.TOP,s));t.addListener(new k(document.getElementById("testCanvas2"),i,t,f.SOUTH,"sliceYAxis")),t.addListener(new k(document.getElementById("testCanvas3"),i,t,f.NORTH,"sliceYAxis")),t.addListener(new k(document.getElementById("testCanvas4"),i,t,f.EAST,"sliceXAxis")),t.addListener(new k(document.getElementById("testCanvas5"),i,t,f.WEST,"sliceXAxis")),t.addListener(new k(document.getElementById("testCanvas6"),i,t,f.TOP,"sliceZAxis")),t.addListener(new k(document.getElementById("testCanvas7"),i,t,f.BOTTOM,"sliceZAxis")),t.updateViews(),a.isWired=!0}}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.isWired=!1,this.wire()}},{key:"componentDidUpdate",value:function(){this.wire()}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.controller,a=e.model,i=[],n=[],s=[];if(t&&a){for(var c=16;c>=0;c-=1){var o="testCanvasArrNS".concat(c);i.push(r.a.createElement("div",{key:"ns".concat(c),className:"testArr"},r.a.createElement("canvas",{id:o,width:120,height:120})))}for(var l=0;l<17;l+=1){var h="testCanvasArrEW".concat(l);n.push(r.a.createElement("div",{key:"ew".concat(l),className:"testArr"},r.a.createElement("canvas",{id:h,width:200,height:200})))}for(var d=6;d>=0;d-=1){var u="testCanvasArrTB".concat(d);s.push(r.a.createElement("div",{key:"tb".concat(d),className:"testArr"},r.a.createElement("canvas",{id:u,width:200,height:200})))}}return r.a.createElement("div",{className:"display-developer"},r.a.createElement("div",null,r.a.createElement("div",{style:{position:"absolute",top:0,left:100},className:"northsouth"},r.a.createElement("h3",null,"NORTH/SOUTH"),i),r.a.createElement("div",{style:{position:"absolute",top:0,left:300}},r.a.createElement("h3",null,"TOP/BOTTOM"),s),r.a.createElement("div",{style:{position:"absolute",top:50,left:600}},r.a.createElement("h3",null,"Key Controls"),r.a.createElement("ul",null,r.a.createElement("li",null,"v: 2D slice view"),r.a.createElement("li",null,"b: 3D walk through"),r.a.createElement("li",null,"x: north slice view"),r.a.createElement("li",null,"a: east slice view"),r.a.createElement("li",null,"w: south slice view"),r.a.createElement("li",null,"d: west slice view"),r.a.createElement("li",null,"s: top plan view"),r.a.createElement("li",null,"c: bottom plan view"),r.a.createElement("li",null,"1: add cube"),r.a.createElement("li",null,"2: add tree"),r.a.createElement("li",null,"3: add roof left"),r.a.createElement("li",null,"4: add roof right"),r.a.createElement("li",null,"5: remove element"),r.a.createElement("li",null,"\u2191: move forward in 3D"),r.a.createElement("li",null,"\u2193: move backward in 3D")))),r.a.createElement("div",{style:{position:"absolute",top:1e3,left:300},className:"horizontal"},r.a.createElement("h3",null,"EAST/WEST"),n),r.a.createElement("div",{style:{position:"absolute",top:0,right:220}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.SOUTH?"red":"black"}},"SOUTH"),r.a.createElement("canvas",{id:"testCanvas2",width:200,height:200,style:{transform:"rotateX(180deg) rotateY(180deg)"}})),r.a.createElement("td",null)),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.EAST?"red":"black"}},"EAST"),r.a.createElement("canvas",{id:"testCanvas4",width:200,height:200,style:{transform:"rotateZ(90deg)"}})),r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.TOP?"red":"black"}},"TOP"),r.a.createElement("canvas",{id:"testCanvas6",width:200,height:200})),r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.WEST?"red":"black"}},"WEST"),r.a.createElement("canvas",{id:"testCanvas5",width:200,height:200,style:{transform:"rotateZ(-90deg)"}}))),r.a.createElement("tr",null,r.a.createElement("td",null),r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.NORTH?"red":"black"}},"NORTH"),r.a.createElement("canvas",{id:"testCanvas3",width:200,height:200})),r.a.createElement("td",null,r.a.createElement("h2",{style:{color:-1===f.BOTTOM?"red":"black"}},"BOTTOM"),r.a.createElement("canvas",{id:"testCanvas7",width:200,height:200})))))))}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={controller:null,showDebug:!1},a.wire=function(){var e=a.props.model;if(!a.isWired&&e){a.isWired=!0;var t=new x(e);a.view=new y(a.canvas,e),t.addListener(a.view),t.updateViews(),a.setState({controller:t})}},a.handleKeyDown=function(e){var t=a.state,i=t.controller,r=t.showDebug;switch(e.keyCode){case 87:i.south();break;case 88:i.north();break;case 65:i.east();break;case 68:i.west();break;case 83:i.top();break;case 67:i.bottom();break;case 38:i.nextSlice();break;case 40:i.previousSlice();break;case 80:a.setState({showDebug:!r})}},a.handleClick=function(e){var t=a.state.controller;if(0!==e.offsetX&&e.offsetX!==a.width-1&&0!==e.offsetY&&e.offsetY!==a.height-1){var i=(e.offsetX-1)/a.width,r=(e.offsetY-1)/a.height;switch(a.props.action){case O.STEPOUT:t.previousSlice();break;case O.STEPIN:t.nextSlice();break;case O.ADDCUBE:t.addObject(i,r,T.CUBE);break;case O.REMOVE:t.removeObject(i,r);break;case O.ROTATELT:t.rotateLeft();break;case O.ADDTREE:t.addObject(i,r,T.TREE);break;case O.ADDRFLFT:t.addObject(i,r,T.ROOFLEFT);break;case O.ADDRFRGT:t.addObject(i,r,T.ROOFRGHT)}}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.isWired=!1,this.canvas=document.getElementById("display2D"),document.addEventListener("keydown",this.handleKeyDown),this.canvas.addEventListener("click",this.handleClick),this.wire()}},{key:"componentDidUpdate",value:function(){this.wire()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown),this.canvas.removeEventListener("click",this.handleClick)}},{key:"render",value:function(){var e=this.state,t=e.controller,a=e.showDebug,i=this.props.model;return this.width=852,this.height=852,r.a.createElement("div",null,r.a.createElement("canvas",{id:"display2D",width:this.width,height:this.height}),a&&i&&t?r.a.createElement(A,{controller:t,model:i}):null)}}]),t}(r.a.Component),C=function e(t,a){var i=this;Object(c.a)(this,e),this.addListener=function(e){return i.views.push(e)},this.removeListener=function(e){return i.views.filter(function(t){return t!==e})},this.animateCameraPath=function(){if(i.i<i.path.length-1){i.i+=1;var e=i.path[i.i];i.views.forEach(function(t){return t.setCameraPosition(e)})}setTimeout(function(){return i.animateCameraPath()},500)},this.model=t,this.r=50,this.path=a,this.i=0,this.views=[],setTimeout(function(){return i.animateCameraPath()},500)},D=a(1),j=function e(t,a){var i=this;Object(c.a)(this,e),this.animate=function(){requestAnimationFrame(i.animate),i.hasPosition&&i.renderer.render(i.scene,i.camera)},this.setCameraPosition=function(e){i.hasPosition=!0;var t=e.x,a=e.y,r=e.z;i.camera.position.x=t*i.r,i.camera.position.y=r*i.r+i.r/2,i.camera.position.z=-a*i.r},this.addModelToScene=function(e){if(e)for(var t=e.objects,a=0;a<i.zMax;a+=1)for(var r=0;r<i.yMax;r+=1)for(var n=0;n<i.xMax;n+=1){switch(t[a][r][n]){case T.CUBE:i._addCube(n,r,a);break;case T.TREE:i._addTree(n,r,a);break;case T.FOLIAGE:i._addFoliage(n,r,a);break;case T.ROOFLEFT:i._addRoofLeft(n,r,a);break;case T.ROOFRGHT:i._addRoofRight(n,r,a)}}},this._addCube=function(e,t,a){var r=new D.a(i.r,i.r,i.r),n=new D.d(r),s=new D.g({color:16777215,linewidth:10}),c=new D.h(n,s),o=e*i.r,l=a*i.r,h=-t*i.r;c.position.x=o+i.r/2,c.position.y=l+i.r/2,c.position.z=h-i.r/2,i.scene.add(c)},this._addTree=function(e,t,a){var r=i.r/10,n=new D.c(r,r,i.r,6),s=new D.d(n),c=new D.g({color:16777215,linewidth:10}),o=new D.h(s,c),l=e*i.r,h=a*i.r,d=-t*i.r;o.position.x=l+i.r/2,o.position.y=h+i.r/2,o.position.z=d-i.r/2,i.scene.add(o)},this._addFoliage=function(e,t,a){var r=new D.k(i.r/2,6,6),n=new D.d(r),s=new D.g({color:16777215,linewidth:10}),c=new D.h(n,s),o=e*i.r,l=a*i.r,h=-t*i.r;c.position.x=o+i.r/2,c.position.y=l+i.r/2,c.position.z=h-i.r/2,i.scene.add(c)},this._addRoofLeft=function(e,t,a){var r=new D.f;r.vertices.push(new D.l(0,0,0),new D.l(0,0,-i.r),new D.l(i.r,0,-i.r),new D.l(i.r,0,0),new D.l(i.r,i.r,0),new D.l(i.r,i.r,-i.r)),r.faces.push(new D.e(0,1,2,3),new D.e(2,3,4,5),new D.e(0,3,4),new D.e(1,2,5),new D.e(0,1,4,5));var n=new D.d(r),s=new D.g({color:16777215,linewidth:10}),c=new D.h(n,s),o={x:e*i.r,y:a*i.r,z:-t*i.r};c.position.x=o.x,c.position.y=o.y,c.position.z=o.z,i.scene.add(c)},this._addRoofRight=function(e,t,a){var r=new D.f;r.vertices.push(new D.l(0,0,0),new D.l(0,0,-i.r),new D.l(i.r,0,-i.r),new D.l(i.r,0,0),new D.l(0,i.r,0),new D.l(0,i.r,-i.r)),r.faces.push(new D.e(0,1,2,3),new D.e(2,3,4,5),new D.e(0,3,4),new D.e(1,2,5),new D.e(0,1,4,5));var n=new D.d(r),s=new D.g({color:16777215,linewidth:10}),c=new D.h(n,s),o={x:e*i.r,y:a*i.r,z:-t*i.r};c.position.x=o.x,c.position.y=o.y,c.position.z=o.z,i.scene.add(c)},this.container=t,this.width=852,this.height=852,this.gridSize=17,this.xMax=17,this.yMax=17,this.zMax=7,this.r=(this.width-2)/this.gridSize,this.hasPosition=!1,this.scene=new D.j,this.scene.background=new D.b(0),this.camera=new D.i(45,this.width/this.height,1,1e3),this.scene.add(this.camera),this.renderer=new D.m({antialias:!0}),this.renderer.setPixelRatio(1),this.renderer.setSize(this.width,this.height),this.container.appendChild(this.renderer.domElement),this.addModelToScene(a),this.animate()},z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleKeyDown=function(e){switch(e.keyCode){case 87:a.camera.position.z-=a.r;break;case 83:a.camera.position.z+=a.r}},a.wire=function(){var e=a.props,t=e.model,i=e.cameraPath;if(!a.isWired&&t&&i){a.isWired=!0;var r=new C(t,i);a.view=new j(a.container,t),r.addListener(a.view)}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.isWired=!1,this.container=document.getElementById("display3D"),document.addEventListener("keydown",this.handleKeyDown),this.wire()}},{key:"componentDidUpdate",value:function(){this.wire()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return this.width=852,this.height=852,r.a.createElement("div",{id:"display3D",style:{width:this.width,height:this.height}})}}]),t}(r.a.Component),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state={model:null,displayType:"2D"},a.handleKeyDown=function(e){switch(e.keyCode){case 86:a.setState({displayType:"2D"});break;case 66:a.setState({displayType:"PATH"})}},a.getDisplay=function(){var e=a.props.action,t=a.state,i=t.model,n=t.displayType;if(!i||!e)return null;for(var s=[],c=0;c<10;c+=1)s.push({x:10,y:c,z:0});switch(n){case"2D":return r.a.createElement(R,{action:e,model:i});case"PATH":return r.a.createElement(z,{model:i,cameraPath:s})}return null},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown);var e=new g;this.setState({model:e})}},{key:"render",value:function(){return r.a.createElement("div",null,this.getDisplay())}}]),t}(r.a.Component),M=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=[],t=this.props,a=t.buttons,i=t.onClick;return a&&a.forEach(function(t){e.push(r.a.createElement("button",{type:"button",key:t.label,button:t,onClick:function(e){e.preventDefault(),i(t)},style:{display:"block"}},t.label))}),r.a.createElement("div",null,e)}}]),t}(r.a.PureComponent),H=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.user,t="Welcome";return e&&(t="Welcome ".concat(e.isNewUser?"":"back "," ").concat(e.name," this is URBAN5.")),r.a.createElement("div",null,r.a.createElement("span",{className:"mono-text"},t))}}]),t}(r.a.PureComponent),L={STEPOUT:{label:"STEP OUT",action:O.STEPOUT},STEPIN:{label:"STEP  IN",action:O.STEPIN},ADDCUBE:{label:"ADD CUBE",action:O.ADDCUBE},REMOVE:{label:"RE  MOVE",action:O.REMOVE},ROTATELT:{label:"ROTATELT",action:O.ROTATELT},ROTATERT:{label:"ROTATERT",action:O.ROTATERT},ADDTREE:{label:"ADD TREE",action:O.ADDTREE},ADDRFLFT:{label:"ADDRFLFT",action:O.ADDRFLFT},ADDRFRGT:{label:"ADDRFRGT",action:O.ADDRFRGT}},F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={action:2},a.onMenuClick=function(e){a.setState({action:e.action})},a.handleKeyDown=function(e){var t;switch(e.keyCode){case 48:t=O.REMOVE;break;case 49:t=O.ADDCUBE;break;case 50:t=O.ADDTREE;break;case 51:t=O.ADDRFLFT;break;case 52:t=O.ADDRFRGT;break;case 53:t=O.REMOVE;break;case 54:t=O.ADDCUBE;break;case 55:t=O.ADDRFLFT;break;case 56:t=O.ADDRFRGT}t&&a.setState({action:t})},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=[L.ADDCUBE,L.ADDTREE,L.ADDRFLFT,L.ADDRFRGT,L.REMOVE],t=this.props.user,a=this.state.action;return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"864px",height:"100%",float:"left"}},r.a.createElement("div",{style:{width:"864px",height:"160px"}},r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(H,{user:t}))),r.a.createElement("div",{style:{width:"852px",height:"852px",padding:"5px"}},r.a.createElement(_,{action:a}))),r.a.createElement("div",{style:{width:"160px",height:"100%",float:"left"}},r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(M,{buttons:e,onClick:this.onMenuClick}))))}}]),t}(r.a.Component),B=(a(20),function(e){function t(){var e,a;Object(c.a)(this,t);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(a=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={user:{isNewUser:!1,name:"Erik"}},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"app"},r.a.createElement(F,{user:e}))}}]),t}(i.Component));s.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[11,2,1]]]);
//# sourceMappingURL=main.8bf489d1.chunk.js.map